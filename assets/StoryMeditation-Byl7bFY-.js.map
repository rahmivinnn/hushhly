{"version":3,"file":"StoryMeditation-Byl7bFY-.js","sources":["../../src/pages/StoryMeditation.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { ArrowLeft, Bell, Play, Pause, Volume2, VolumeX, Heart, SkipBack, SkipForward, Shuffle, Repeat, Home, BookOpen, Users, Moon, User } from 'lucide-react';\nimport BottomNavigation from '@/components/BottomNavigation';\nimport { useToast } from \"@/hooks/use-toast\";\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\n\n// Frequency visualization constants\nconst FREQUENCY_TYPES = {\n  LOW: { label: 'Low Frequency (Calming, Grounding)', color: 'from-blue-400 to-blue-600' },\n  MID: { label: 'Mid Frequency (Soothing, Ambient)', color: 'from-cyan-400 to-cyan-600' },\n  HIGH: { label: 'High Frequency (Subtle, Ethereal)', color: 'from-purple-400 to-purple-600' }\n};\n\nconst StoryMeditation = () => {\n  // Animation variants for UI elements\n  const fadeInUp = {\n    initial: { opacity: 0, y: 20 },\n    animate: { opacity: 1, y: 0 },\n    exit: { opacity: 0, y: -20 },\n    transition: { duration: 0.6, ease: 'easeOut' }\n  };\n\n  const pulseAnimation = {\n    initial: { scale: 1 },\n    animate: { scale: 1.05 },\n    transition: { duration: 1, repeat: Infinity, repeatType: 'reverse' }\n  };\n\n  const buttonHoverAnimation = {\n    scale: 1.05,\n    transition: { duration: 0.2 }\n  };\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { toast } = useToast();\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [currentTime, setCurrentTime] = useState('00:00');\n  const [showCompletionScreen, setShowCompletionScreen] = useState(false);\n  const audioRef = useRef(null);\n  const intervalRef = useRef(null);\n  const [waveformBars, setWaveformBars] = useState([]);\n  const [currentFrequency, setCurrentFrequency] = useState('MID');\n  const [isHovered, setIsHovered] = useState(false);\n\n  // Get story details from location state or use default\n  const storyDetails = location.state || {\n    title: 'The Whispering Forest',\n    description: 'A walk through a magical, quiet woodland.',\n    image: '/lovable-uploads/whispering-forest.svg',\n    duration: '15:00',\n    icon: 'üå≤'\n  };\n\n  // Format seconds to time string (mm:ss)\n  const formatTime = (totalSeconds) => {\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = Math.floor(totalSeconds % 60);\n    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  // Convert duration string to seconds\n  const getDurationInSeconds = () => {\n    if (!storyDetails.duration) return 900; // Default 15 minutes\n\n    if (typeof storyDetails.duration === 'string' && storyDetails.duration.includes('Min')) {\n      const minutes = parseInt(storyDetails.duration.split(' ')[0]);\n      return minutes * 60;\n    }\n\n    if (typeof storyDetails.duration === 'string' && storyDetails.duration.includes(':')) {\n      const [minutes, seconds] = storyDetails.duration.split(':').map(Number);\n      return minutes * 60 + (seconds || 0);\n    }\n\n    return 900; // Default 15 minutes as fallback\n  };\n\n  const totalDurationInSeconds = getDurationInSeconds();\n  const formattedTotalDuration = formatTime(totalDurationInSeconds);\n\n  // Generate and animate waveform bars\n  useEffect(() => {\n    const generateBars = () => {\n      const bars = [];\n      for (let i = 0; i < 50; i++) {\n        const frequency = Math.sin((Date.now() / 1000) + i * 0.2);\n        const amplitude = Math.random() * 100;\n        bars.push({\n          height: amplitude,\n          frequency: frequency\n        });\n      }\n      return bars;\n    };\n\n    setWaveformBars(generateBars());\n\n    const interval = setInterval(() => {\n      if (isPlaying) {\n        setWaveformBars(generateBars());\n        // Simulate frequency changes\n        setCurrentFrequency(prev => {\n          const frequencies = Object.keys(FREQUENCY_TYPES);\n          const currentIndex = frequencies.indexOf(prev);\n          return frequencies[(currentIndex + 1) % frequencies.length];\n        });\n      }\n    }, 100);\n\n    return () => clearInterval(interval);\n  }, [isPlaying]);\n\n  // Format seconds to time string (mm:ss) - already defined above\n\n  // Toggle play/pause\n  const togglePlayPause = () => {\n    if (showCompletionScreen) {\n      setShowCompletionScreen(false);\n      setProgress(0);\n      setCurrentTime('00:00');\n      if (audioRef.current) {\n        audioRef.current.currentTime = 0;\n      }\n    }\n\n    if (isPlaying) {\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n      clearInterval(intervalRef.current);\n    } else {\n      if (audioRef.current) {\n        audioRef.current.play().catch(error => {\n          console.error('Error playing audio:', error);\n          toast({\n            title: \"Audio Error\",\n            description: \"There was an error playing the audio. Please try again.\"\n          });\n        });\n      }\n\n      // Simulate playback progress\n      intervalRef.current = setInterval(() => {\n        setProgress((prev) => {\n          if (prev >= 100) {\n            clearInterval(intervalRef.current);\n            setIsPlaying(false);\n            setShowCompletionScreen(true);\n            if (audioRef.current) {\n              audioRef.current.pause();\n            }\n            return 100;\n          }\n\n          // Update current time based on progress\n          const currentSeconds = Math.floor(totalDurationInSeconds * prev / 100);\n          setCurrentTime(formatTime(currentSeconds));\n\n          return prev + (100 / (totalDurationInSeconds / 0.5));\n        });\n      }, 500);\n    }\n\n    setIsPlaying(!isPlaying);\n  };\n\n  // Toggle mute\n  const toggleMute = () => {\n    if (audioRef.current) {\n      audioRef.current.muted = !isMuted;\n    }\n    setIsMuted(!isMuted);\n  };\n\n  // Handle back button\n  const handleBack = () => {\n    if (isPlaying) {\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n      clearInterval(intervalRef.current);\n    }\n    navigate(-1);\n  };\n\n  // Clean up on unmount\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n    };\n  }, []);\n\n  // Get story image based on title\n  const getStoryImage = () => {\n    const title = storyDetails.title.toLowerCase();\n\n    if (title.includes('forest') || title.includes('tree')) {\n      return '/lovable-uploads/forest-meditation.jpg';\n    } else if (title.includes('night') || title.includes('star') || title.includes('dream')) {\n      return '/lovable-uploads/starlit-dreams.jpg';\n    } else if (title.includes('ocean') || title.includes('sea') || title.includes('water')) {\n      return '/lovable-uploads/ocean-waves.jpg';\n    } else if (title.includes('mountain')) {\n      return '/lovable-uploads/mountain-serenity.jpg';\n    } else if (title.includes('flower') || title.includes('garden')) {\n      return '/lovable-uploads/peaceful-garden.jpg';\n    } else if (title.includes('rain')) {\n      return '/lovable-uploads/gentle-rainfall.jpg';\n    } else if (title.includes('sun') || title.includes('morning')) {\n      return '/lovable-uploads/sunrise-meditation.jpg';\n    } else if (title.includes('moon')) {\n      return '/lovable-uploads/moonlight-magic.jpg';\n    } else if (title.includes('child') || title.includes('kid')) {\n      return '/lovable-uploads/child-meditation.jpg';\n    } else {\n      return '/lovable-uploads/whispering-forest.jpg';\n    }\n  };\n\n  // Get background gradient based on story title\n  const getBackgroundGradient = () => {\n    // Use a consistent cyan-to-blue gradient as shown in the reference image\n    return 'from-cyan-500 via-blue-500 to-indigo-600';\n  };\n\n  // Get emoji icon based on story title (fallback function)\n  const getStoryIcon = () => {\n    const title = storyDetails.title.toLowerCase();\n\n    if (title.includes('forest') || title.includes('tree')) {\n      return 'üå≤';\n    } else if (title.includes('night') || title.includes('star') || title.includes('dream')) {\n      return '‚ú®';\n    } else if (title.includes('ocean') || title.includes('sea') || title.includes('water')) {\n      return 'üåä';\n    } else if (title.includes('mountain')) {\n      return 'üèîÔ∏è';\n    } else if (title.includes('flower') || title.includes('garden')) {\n      return 'üå∏';\n    } else if (title.includes('rain')) {\n      return 'üåßÔ∏è';\n    } else if (title.includes('sun') || title.includes('morning')) {\n      return '‚òÄÔ∏è';\n    } else if (title.includes('moon')) {\n      return 'üåô';\n    } else if (title.includes('child') || title.includes('kid')) {\n      return 'üë∂';\n    } else {\n      return 'üßò';\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-white\">\n      {/* Header */}\n      <header className=\"flex items-center justify-between px-6 pt-6 pb-4 bg-transparent\">\n        <button onClick={handleBack} className=\"text-gray-800\">\n          <ArrowLeft size={24} />\n        </button>\n        <div className=\"flex items-center\">\n          <img\n            src=\"/lovable-uploads/600dca76-c989-40af-876f-bd95270e81fc.png\"\n            alt=\"Shh Logo\"\n            className=\"h-8\"\n            style={{ filter: 'invert(45%) sepia(60%) saturate(2210%) hue-rotate(205deg) brightness(101%) contrast(101%)' }}\n          />\n        </div>\n        <div className=\"flex space-x-4\">\n          <button className=\"text-gray-800\" onClick={toggleMute}>\n            {isMuted ? <VolumeX size={24} /> : <Volume2 size={24} />}\n          </button>\n        </div>\n      </header>\n\n      <AnimatePresence>\n        {showCompletionScreen ? (\n          /* Meditation Completion Screen */\n          <motion.div\n            className=\"flex-1 flex flex-col items-center justify-center px-6\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            <motion.div\n              className=\"bg-white/10 backdrop-blur-md rounded-2xl p-8 max-w-md w-full text-center\"\n              initial={{ scale: 0.9, y: 20 }}\n              animate={{ scale: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n            >\n              <div className=\"w-20 h-20 rounded-full bg-green-500/30 backdrop-blur-sm flex items-center justify-center mx-auto mb-6\">\n                <Heart size={40} className=\"text-white\" />\n              </div>\n\n              <h2 className=\"text-2xl font-bold mb-2 text-white\">Story Complete</h2>\n              <p className=\"text-white/80 mb-6\">\n                You've completed \"{storyDetails.title}\".\n                We hope you enjoyed it.\n              </p>\n\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={handleBack}\n                  className=\"flex-1 py-3 px-4 rounded-xl bg-white/10 hover:bg-white/20 transition-colors text-white\"\n                >\n                  Back to Stories\n                </button>\n                <button\n                  onClick={togglePlayPause}\n                  className=\"flex-1 py-3 px-4 rounded-xl bg-white/20 hover:bg-white/30 transition-colors text-white\"\n                >\n                  Play Again\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        ) : (\n          /* Main Content */\n          <div className=\"flex-1 flex flex-col items-center justify-center px-6\">\n            {/* Story Image with Animation */}\n            <motion.div\n              className=\"w-full max-w-[500px] aspect-square rounded-full overflow-hidden border-8 border-white/30 shadow-2xl mb-8 relative\"\n              initial=\"initial\"\n              animate=\"animate\"\n              variants={pulseAnimation}\n            >\n              <motion.div\n                className=\"absolute inset-0 bg-cover bg-center\"\n                style={{\n                  backgroundImage: `url(${getStoryImage()})`\n                }}\n              />\n              <motion.div\n                className=\"absolute inset-0 bg-gradient-to-br from-blue-500/40 via-cyan-500/30 to-purple-500/40 backdrop-blur-sm\"\n                animate={{\n                  opacity: [0.4, 0.6, 0.4],\n                  scale: [1, 1.05, 1]\n                }}\n                transition={{ duration: 6, repeat: Infinity, repeatType: 'reverse', ease: 'easeInOut' }}\n              />\n              <motion.div\n                className=\"absolute inset-0 flex items-center justify-center\"\n                initial={{ scale: 0.9, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                transition={{ duration: 0.6 }}\n              >\n                <motion.span\n                  className=\"text-9xl relative z-10 drop-shadow-2xl\"\n                  initial={{ scale: 0.9 }}\n                  animate={{ scale: 1.1 }}\n                  transition={{ duration: 2, repeat: Infinity, repeatType: 'reverse' }}\n                >\n                  {storyDetails.icon}\n                </motion.span>\n              </motion.div>\n            </motion.div>\n\n            {/* Story Title and Description with Animation */}\n            <motion.div\n              className=\"text-center mb-10\"\n              variants={fadeInUp}\n              initial=\"initial\"\n              animate=\"animate\"\n              exit=\"exit\"\n            >\n              <motion.h1\n                className=\"text-gray-800 text-2xl font-bold mb-2\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.2 }}\n              >\n                {storyDetails.title}\n              </motion.h1>\n              <motion.p\n                className=\"text-gray-600 text-sm\"\n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                transition={{ delay: 0.4 }}\n              >\n                {storyDetails.description}\n              </motion.p>\n            </motion.div>\n\n            {/* Enhanced Waveform Visualization */}\n            <div className=\"w-full mb-4 relative\">\n              <motion.div\n                className=\"absolute inset-0 bg-gradient-to-r opacity-20\"\n                animate={{\n                  background: [\n                    `linear-gradient(90deg, ${FREQUENCY_TYPES[currentFrequency].color})`,\n                    `linear-gradient(90deg, ${FREQUENCY_TYPES[currentFrequency].color})`\n                  ]\n                }}\n                transition={{ duration: 1 }}\n              />\n              <div className=\"flex items-end justify-between h-16 px-2 relative\">\n                {waveformBars.map((bar, index) => {\n                  const barProgress = (index / waveformBars.length) * 100;\n                  const isActive = barProgress <= progress;\n                  return (\n                    <motion.div\n                      key={index}\n                      className={cn(\n                        'w-1 rounded-full mx-0.5',\n                        isActive ? `bg-gradient-to-t ${FREQUENCY_TYPES[currentFrequency].color}` : 'bg-gray-200'\n                      )}\n                      initial={{ height: '20%' }}\n                      animate={{\n                        height: `${Math.max(15, isPlaying ? (bar.height + (bar.frequency * 20)) : bar.height)}%`,\n                        opacity: isPlaying ? [0.6, 1] : 0.8\n                      }}\n                      transition={{\n                        duration: 0.4,\n                        ease: 'easeInOut'\n                      }}\n                    />\n                  );\n                })}\n              </div>\n              <style jsx>{`\n                @keyframes pulse {\n                  0% { transform: scaleY(1); }\n                  50% { transform: scaleY(1.1); }\n                  100% { transform: scaleY(1); }\n                }\n              `}</style>\n            </div>\n\n            {/* Time Display */}\n            <div className=\"flex justify-between w-full text-white mb-6\">\n              <span className=\"text-sm\">{currentTime}</span>\n              <span className=\"text-sm\">{formattedTotalDuration}</span>\n            </div>\n\n            {/* Audio Controls */}\n            <div className=\"flex items-center justify-between w-full mb-8\">\n              <button className=\"text-gray-600 hover:text-blue-500 transition-colors p-2 rounded-full hover:bg-gray-100\">\n                <Shuffle size={20} />\n              </button>\n\n              <button className=\"text-gray-600 hover:text-blue-500 transition-colors p-2 rounded-full hover:bg-gray-100\">\n                <SkipBack size={24} />\n              </button>\n\n              <motion.button\n                onClick={togglePlayPause}\n                className=\"relative bg-gradient-to-br from-cyan-500 to-blue-600 text-white p-4 rounded-full shadow-lg overflow-hidden\"\n                whileHover={buttonHoverAnimation}\n                whileTap={{ scale: 0.95 }}\n                onHoverStart={() => setIsHovered(true)}\n                onHoverEnd={() => setIsHovered(false)}\n              >\n                <motion.div\n                  className=\"absolute inset-0 bg-gradient-to-br from-cyan-400/30 to-blue-500/30\"\n                  animate={{\n                    scale: isPlaying ? [1, 1.2, 1] : 1,\n                    opacity: isPlaying ? [0.2, 0.4, 0.2] : 0.2\n                  }}\n                  transition={{\n                    duration: 2,\n                    repeat: Infinity,\n                    ease: 'easeInOut'\n                  }}\n                />\n                <motion.div\n                  animate={{\n                    scale: isPlaying ? [1, 1.1, 1] : 1,\n                    rotate: isPlaying ? [0, 180, 360] : 0\n                  }}\n                  transition={{\n                    duration: isPlaying ? 4 : 0.3,\n                    repeat: isPlaying ? Infinity : 0,\n                    ease: 'linear'\n                  }}\n                >\n                  {isPlaying ? <Pause size={28} /> : <Play size={28} className=\"ml-1\" />}\n                </motion.div>\n              </motion.button>\n\n              <button className=\"text-gray-600 hover:text-blue-500 transition-colors p-2 rounded-full hover:bg-gray-100\">\n                <SkipForward size={24} />\n              </button>\n\n              <button className=\"text-gray-600 hover:text-blue-500 transition-colors p-2 rounded-full hover:bg-gray-100\">\n                <Repeat size={20} />\n              </button>\n            </div>\n\n            {/* Enhanced Start Meditation Button */}\n            <motion.button\n              className=\"relative bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-600 text-white text-lg font-medium mb-8 px-8 py-3 rounded-full shadow-lg overflow-hidden\"\n              whileHover={{\n                scale: 1.05,\n                backgroundPosition: ['0%', '100%'],\n                transition: { duration: 1, repeat: Infinity, repeatType: 'reverse' }\n              }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => {\n                setIsPlaying(true);\n                togglePlayPause();\n                toast({\n                  title: \"Meditation Started\",\n                  description: \"Relax and enjoy your meditation journey\",\n                  duration: 3000\n                });\n              }}\n            >\n              <motion.div\n                className=\"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent\"\n                animate={{\n                  x: ['0%', '100%'],\n                  opacity: [0, 0.5, 0]\n                }}\n                transition={{\n                  duration: 2,\n                  repeat: Infinity,\n                  ease: 'linear'\n                }}\n              />\n              <span className=\"relative z-10\">Start Meditation</span>\n            </motion.button>\n          </div>\n        )}\n      </AnimatePresence>\n\n      {/* Audio Element (hidden) */}\n      <audio ref={audioRef} loop>\n        <source src=\"/lovable-uploads/meditation-sound.mp3\" type=\"audio/mpeg\" />\n        <source src=\"/meditation-sound.mp3\" type=\"audio/mpeg\" />\n        Your browser does not support the audio element.\n      </audio>\n\n      {/* Bottom Navigation */}\n      <BottomNavigation />\n    </div>\n  );\n};\n\nexport default StoryMeditation;\n"],"names":["FREQUENCY_TYPES","LOW","label","color","MID","HIGH","StoryMeditation","fadeInUp","initial","opacity","y","animate","exit","transition","duration","ease","pulseAnimation","scale","repeat","Infinity","repeatType","buttonHoverAnimation","navigate","useNavigate","location","useLocation","toast","useToast","isPlaying","setIsPlaying","useState","isMuted","setIsMuted","progress","setProgress","currentTime","setCurrentTime","showCompletionScreen","setShowCompletionScreen","audioRef","useRef","intervalRef","waveformBars","setWaveformBars","currentFrequency","setCurrentFrequency","isHovered","setIsHovered","storyDetails","state","title","description","image","icon","formatTime","totalSeconds","minutes","Math","floor","seconds","toString","padStart","totalDurationInSeconds","includes","parseInt","split","map","Number","formattedTotalDuration","useEffect","generateBars","bars","i","frequency","sin","now","amplitude","random","push","height","interval","setInterval","prev","frequencies","Object","keys","currentIndex","indexOf","length","clearInterval","togglePlayPause","current","pause","play","catch","error","currentSeconds","toggleMute","muted","handleBack","getStoryImage","toLowerCase","div","className","header","button","onClick","ArrowLeft","size","img","src","alt","style","filter","_jsx","VolumeX","Volume2","AnimatePresence","motion","delay","Heart","h2","p","_jsxs","variants","backgroundImage","span","h1","background","bar","index","isActive","cn","max","jsx","Shuffle","SkipBack","whileHover","whileTap","onHoverStart","onHoverEnd","rotate","Pause","Play","SkipForward","Repeat","backgroundPosition","x","audio","ref","loop","source","type","BottomNavigation"],"mappings":"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"}