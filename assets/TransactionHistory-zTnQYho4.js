import{r as a,j as e,J as b,u as N}from"./index-BnT946GU.js";import{b as i}from"./balanceService-BrshoRSL.js";import{u as g}from"./useAuthSimple-7TrV8nxw.js";import{A as w}from"./arrow-left-BQRj5OLm.js";const I=({showAddFunds:p=!1,compact:r=!1,className:n=""})=>{const{user:l}=g(),[d,m]=a.useState(0),[o,s]=a.useState("USD"),[c,x]=a.useState(!0),j=()=>{let t=localStorage.getItem("temp_user_id");return t||(t=`temp_user_${Date.now()}`,localStorage.setItem("temp_user_id",t)),t},y=()=>(l==null?void 0:l.id)||j();return a.useEffect(()=>{const t=()=>{try{const u=y(),h=i.getUserBalance(u);m(h.balance),s(h.currency)}catch(u){console.error("Error loading balance:",u),b.error("Failed to load balance")}finally{x(!1)}};t();const v=setInterval(t,1e3),f=()=>t();return window.addEventListener("balance-updated",f),()=>{clearInterval(v),window.removeEventListener("balance-updated",f)}},[l]),c?e.jsx("div",{className:`animate-pulse ${n}`,children:e.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"})}):r?e.jsx("div",{className:`flex items-center ${n}`,children:e.jsx("span",{className:"font-medium text-sm",children:i.formatBalance(d,o)})}):e.jsx("div",{className:`flex flex-col ${n}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Your Balance"}),e.jsx("p",{className:"text-xl font-bold",children:i.formatBalance(d,o)})]})})})},B=()=>e.jsx("div",{className:"flex items-center justify-between bg-white px-4 py-2 shadow-sm rounded-lg",children:e.jsx(I,{compact:!0})}),T=()=>{const p=N(),{user:r}=g(),[n,l]=a.useState([]),[d,m]=a.useState(!0);a.useEffect(()=>{(()=>{try{const c=(r==null?void 0:r.id)||`temp_user_${Date.now()}`,x=i.getTransactionHistory(c);l(x)}catch(c){console.error("Error loading transactions:",c)}finally{m(!1)}})()},[r]);const o=s=>new Date(s).toLocaleString();return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>p(-1),className:"p-2 mr-2 text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(w,{size:20})}),e.jsx("h1",{className:"text-xl font-semibold",children:"Transaction History"})]}),e.jsx("div",{className:"w-32",children:e.jsx(B,{})})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6 flex-grow",children:d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-500 border-t-transparent"})}):n.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No transactions found"})}):e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.description}),e.jsx("p",{className:"text-sm text-gray-500",children:o(s.timestamp)}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status}),s.paymentMethod&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["via ",s.paymentMethod]})]})]}),e.jsxs("div",{className:`font-bold ${s.type==="credit"?"text-green-600":"text-red-600"}`,children:[s.type==="credit"?"+":"-",i.formatBalance(s.amount)]})]},s.id))})})]})};export{T as default};
//# sourceMappingURL=TransactionHistory-zTnQYho4.js.map
