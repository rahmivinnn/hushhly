{"version":3,"file":"StoryDetail-D3qXJkHS.js","sources":["../../src/pages/StoryDetail.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { ArrowLeft, Bell, Trophy, Play, Pause, SkipBack, SkipForward, Shuffle, Repeat, Home, BookOpen, Users, Moon, User } from 'lucide-react';\r\nimport BottomNavigation from '@/components/BottomNavigation';\r\n\r\nconst StoryDetail = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState('00:00');\r\n  const [totalTime, setTotalTime] = useState('15:00');\r\n  const [progress, setProgress] = useState(0); // Progress in percentage\r\n  const intervalRef = useRef(null);\r\n  const [waveformBars, setWaveformBars] = useState([]);\r\n\r\n  // Get story details from location state or use default\r\n  const storyDetails = location.state?.story || {\r\n    title: 'The Whispering Forest',\r\n    description: 'A walk through a magical, quiet woodland.',\r\n    image: '/lovable-uploads/whispering-forest.svg',\r\n    duration: '15:00',\r\n    icon: 'ðŸŒ²',\r\n    isPremium: false\r\n  };\r\n\r\n  // Generate random waveform bars\r\n  useEffect(() => {\r\n    const bars = [];\r\n    for (let i = 0; i < 50; i++) {\r\n      bars.push(Math.random() * 100);\r\n    }\r\n    setWaveformBars(bars);\r\n    setTotalTime(storyDetails.duration || '15:00');\r\n  }, [storyDetails]);\r\n\r\n  // Toggle play/pause\r\n  const togglePlayPause = () => {\r\n    // Navigate to StoryMeditation component with story details\r\n    navigate('/story-meditation', {\r\n      state: {\r\n        title: storyDetails.title,\r\n        description: storyDetails.description,\r\n        image: storyDetails.image,\r\n        duration: totalTime,\r\n        icon: storyDetails.icon\r\n      }\r\n    });\r\n\r\n    // Show toast notification\r\n    toast({\r\n      title: \"Starting Meditation\",\r\n      description: `${storyDetails.title} is starting...`,\r\n      duration: 3000,\r\n    });\r\n  };\r\n\r\n  // Convert time string (mm:ss) to seconds\r\n  const convertTimeToSeconds = (timeString) => {\r\n    const [minutes, seconds] = timeString.split(':').map(Number);\r\n    return minutes * 60 + seconds;\r\n  };\r\n\r\n  // Format seconds to time string (mm:ss)\r\n  const formatTime = (totalSeconds) => {\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    const seconds = totalSeconds % 60;\r\n    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // Handle back button\r\n  const handleBack = () => {\r\n    navigate(-1);\r\n  };\r\n\r\n  // Start meditation button\r\n  const handleStartMeditation = () => {\r\n    navigate('/meditation');\r\n  };\r\n\r\n  // Clean up interval on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-gradient-to-b from-blue-600 to-indigo-900\">\r\n      {/* Header */}\r\n      <header className=\"flex items-center justify-between px-6 pt-6 pb-4 bg-transparent\">\r\n        <button onClick={handleBack} className=\"text-white\">\r\n          <ArrowLeft size={24} />\r\n        </button>\r\n        <div className=\"text-white\">\r\n          <img src=\"/lovable-uploads/600dca76-c989-40af-876f-bd95270e81fc.png\" alt=\"shh\" className=\"h-8\" style={{ filter: 'invert(45%) sepia(60%) saturate(2210%) hue-rotate(205deg) brightness(101%) contrast(101%)' }} />\r\n        </div>\r\n        <div className=\"flex space-x-4\">\r\n          <button className=\"text-white\">\r\n            <Bell size={24} />\r\n          </button>\r\n          <button className=\"text-yellow-300\">\r\n            <Trophy size={24} />\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col items-center justify-center px-6\">\r\n        {/* Story Image */}\r\n        <div className=\"w-64 h-64 rounded-full overflow-hidden border-4 border-white shadow-lg mb-8 bg-blue-600 flex items-center justify-center\">\r\n          <span className=\"text-9xl text-white\">{storyDetails.icon}</span>\r\n        </div>\r\n\r\n        {/* Story Title and Description */}\r\n        <div className=\"text-center mb-10\">\r\n          <h1 className=\"text-white text-2xl font-bold mb-2\">{storyDetails.title}</h1>\r\n          <p className=\"text-gray-200 text-sm\">{storyDetails.description}</p>\r\n        </div>\r\n\r\n        {/* Waveform Visualization */}\r\n        <div className=\"w-full mb-4\">\r\n          <div className=\"flex items-end justify-between h-16 px-2\">\r\n            {waveformBars.map((height, index) => {\r\n              const barProgress = (index / waveformBars.length) * 100;\r\n              const isActive = barProgress <= progress;\r\n              return (\r\n                <div\r\n                  key={index}\r\n                  className={`w-1 rounded-full mx-0.5 ${isActive ? 'bg-gradient-to-t from-blue-400 to-cyan-300' : 'bg-white/30'}`}\r\n                  style={{\r\n                    height: `${Math.max(15, height)}%`,\r\n                    transition: 'height 0.5s ease, background-color 0.3s ease'\r\n                  }}\r\n                ></div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Time Display */}\r\n        <div className=\"flex justify-between w-full text-white mb-6\">\r\n          <span className=\"text-sm\">{currentTime}</span>\r\n          <span className=\"text-sm\">{totalTime}</span>\r\n        </div>\r\n\r\n        {/* Audio Controls */}\r\n        <div className=\"flex justify-center items-center space-x-8 mb-8\">\r\n          <button className=\"text-white hover:text-cyan-300 transition-colors\">\r\n            <Shuffle size={20} />\r\n          </button>\r\n          <button className=\"text-white hover:text-cyan-300 transition-colors\">\r\n            <SkipBack size={24} />\r\n          </button>\r\n          <button\r\n            className=\"bg-gradient-to-r from-blue-500 to-cyan-400 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg hover:opacity-90 transition-opacity\"\r\n            onClick={togglePlayPause}\r\n          >\r\n            {isPlaying ?\r\n              <Pause size={28} className=\"ml-0.5\" /> :\r\n              <Play size={28} className=\"ml-1\" />\r\n            }\r\n          </button>\r\n          <button className=\"text-white hover:text-cyan-300 transition-colors\">\r\n            <SkipForward size={24} />\r\n          </button>\r\n          <button className=\"text-white hover:text-cyan-300 transition-colors\">\r\n            <Repeat size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Start Meditation Button */}\r\n        <button\r\n          className=\"text-cyan-400 text-lg font-medium mb-16 hover:text-cyan-300 transition-colors\"\r\n          onClick={handleStartMeditation}\r\n        >\r\n          Start Meditation\r\n        </button>\r\n      </div>\r\n\r\n      {/* Bottom Navigation */}\r\n      <div className=\"fixed bottom-4 left-4 right-4\">\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-full py-3 px-6 shadow-lg\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <button className=\"flex flex-col items-center text-white opacity-70 hover:opacity-100 transition-opacity\">\r\n              <Home size={20} />\r\n              <span className=\"text-xs mt-1\">Home</span>\r\n            </button>\r\n            <button className=\"flex flex-col items-center text-white opacity-70 hover:opacity-100 transition-opacity\">\r\n              <div className=\"relative\">\r\n                <Jar size={20} />\r\n              </div>\r\n              <span className=\"text-xs mt-1\">Meditate</span>\r\n            </button>\r\n            <button className=\"flex flex-col items-center text-white opacity-70 hover:opacity-100 transition-opacity\">\r\n              <Users size={20} />\r\n              <span className=\"text-xs mt-1\">Community</span>\r\n            </button>\r\n            <button className=\"flex flex-col items-center text-white opacity-100 transition-opacity\">\r\n              <Moon size={20} />\r\n              <span className=\"text-xs mt-1\">Stories</span>\r\n            </button>\r\n            <button className=\"flex flex-col items-center text-white opacity-70 hover:opacity-100 transition-opacity\">\r\n              <User size={20} />\r\n              <span className=\"text-xs mt-1\">Profile</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StoryDetail;\r\n"],"names":["StoryDetail","navigate","useNavigate","location","useLocation","isPlaying","setIsPlaying","useState","currentTime","setCurrentTime","totalTime","setTotalTime","progress","setProgress","intervalRef","useRef","waveformBars","setWaveformBars","storyDetails","state","story","title","description","image","duration","icon","isPremium","useEffect","bars","i","push","Math","random","togglePlayPause","handleBack","handleStartMeditation","current","clearInterval","div","className","header","button","onClick","ArrowLeft","size","img","src","alt","style","filter","Bell","Trophy","span","h1","p","map","height","index","isActive","length","max","transition","Shuffle","SkipBack","_jsx","Pause","Play","SkipForward","Repeat","Home","Jar","Users","Moon","User"],"mappings":"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"}